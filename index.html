<!DOCTYPE html><html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DuCheffton Lite</title>
<link rel="stylesheet" href="style-lite.css">
</head>
<body>
<div id="loginScreen">
  <h2>Digite o PIN</h2>
  <input id="pinInput" maxlength="4">
  <button id="pinSubmit">Entrar</button>
</div>
<div id="app" style="display:none;">
  <h1>Pedidos</h1>
  <button id="newPedido">Novo Pedido</button>
  <div id="lista"></div>
  <div id="formArea" style="display:none;">
    <h2 id="formTitle">Novo Pedido</h2>
    <input id="nome" placeholder="Nome">
    <input id="numero" placeholder="NÃºmero">
    <textarea id="itens" placeholder="Itens"></textarea>
    <input id="valor" placeholder="Valor" type="number">
    <button id="salvar">Salvar</button>
    <button id="cancelar">Cancelar</button>
  </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="firebase-lite.js"></script>
<script src="app-lite.js"></script>
</body>
</html><!-- style-lite.css --><style>
body{font-family:Arial;margin:10px;background:#eee;color:#000;}
#loginScreen{text-align:center;margin-top:40px;}
#lista div{background:#fff;padding:10px;margin:8px 0;border:1px solid #ccc;}
button{padding:8px 12px;margin:4px 0;}
#formArea input, #formArea textarea{width:100%;margin:6px 0;padding:8px;}
</style><!-- firebase-lite.js --><script>
var firebaseConfig={ apiKey: "AIzaSyChkboBPp21hQ_tRFQrV2Hi3iBF-WHxWSE",
  authDomain: "gerenciador-de-pedidos-4ac32.firebaseapp.com",
  projectId: "gerenciador-de-pedidos-4ac32",
  storageBucket: "gerenciador-de-pedidos-4ac32.firebasestorage.app",
  messagingSenderId: "674975621927",
  appId: "1:674975621927:web:a09ad1f5c57c2dcb00ff02" };
firebase.initializeApp(firebaseConfig);
window.db=firebase.firestore();
</script><!-- app-lite.js --><script>
var APP_PIN="1803";
$(function(){
  $("#pinSubmit").click(function(){
    if($("#pinInput").val()===APP_PIN){
      $("#loginScreen").hide();$("#app").show();carregar();
    }
  });

  $("#newPedido").click(function(){
    $("#formArea").show();$("#formTitle").text("Novo Pedido");window.pedidoAtual=null;
  });

  $("#cancelar").click(function(){ $("#formArea").hide(); });

  $("#salvar").click(function(){
    var dados={nome:$("#nome").val(),numero:$("#numero").val(),itens:$("#itens").val(),valor:parseFloat($("#valor").val())||0,horario:new Date(),status:"active"};
    if(window.pedidoAtual){db.collection("pedidos").doc(window.pedidoAtual).update(dados);}else{db.collection("pedidos").add(dados);}$("#formArea").hide();carregar();
  });
});

function carregar(){
  $("#lista").html("Carregando...");
  db.collection("pedidos").where("status","==","active").orderBy("horario","asc").get().then(function(snap){
    var html="";
    snap.forEach(function(doc){var d=doc.data();html+="<div onclick=\"abrir('"+doc.id+"')\"><b>"+d.nome+"</b><br/>R$ "+d.valor.toFixed(2)+"</div>";});
    $("#lista").html(html||"Nenhum pedido.");
  });
}

function abrir(id){
  window.pedidoAtual=id;
  db.collection("pedidos").doc(id).get().then(function(doc){var d=doc.data();$("#formArea").show();$("#formTitle").text("Editar Pedido");$("#nome").val(d.nome);$("#numero").val(d.numero);$("#itens").val(d.itens);$("#valor").val(d.valor);});
}
</script>