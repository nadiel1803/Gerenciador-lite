<!DOCTYPE html><html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DuCheffton Lite</title>
<link rel="stylesheet" href="style-lite.css">
</head>
<body>
<div id="loginScreen">
  <h2>Digite o PIN</h2>
  <input id="pinInput" maxlength="4">
  <button id="pinSubmit">Entrar</button>
</div>
<div id="app" style="display:none;">
  <h1>Pedidos</h1>
  <button id="newPedido">Novo Pedido</button>
  <div id="lista"></div>
  <div id="formArea" style="display:none;">
    <h2 id="formTitle">Novo Pedido</h2>
    <input id="nome" placeholder="Nome">
    <input id="numero" placeholder="Número">
    <textarea id="itens" placeholder="Itens"></textarea>
    <input id="valor" placeholder="Valor" type="number">
    <button id="salvar">Salvar</button>
    <button id="cancelar">Cancelar</button>
  </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="firebase-lite.js"></script>
<script src="app-lite.js"></script>
</body>
</html><!-- style-lite.css --><style>
body{font-family:Arial;margin:10px;background:#eee;color:#000;}
#loginScreen{text-align:center;margin-top:40px;}
#lista div{background:#fff;padding:10px;margin:8px 0;border:1px solid #ccc;}
button{padding:8px 12px;margin:4px 0;}
#formArea input, #formArea textarea{width:100%;margin:6px 0;padding:8px;}

/* Estilo adicional leve (versão mais bonita) */
body{font-family:Arial;margin:0;background:#f4f4f4;color:#222;}
#app,#loginScreen{max-width:600px;margin:0 auto;padding:15px;}
.header{font-size:22px;font-weight:bold;margin:15px 0;text-align:center;}
.box{background:#ffffff;border-radius:10px;border:1px solid #ddd;padding:12px;margin:12px 0;box-shadow:0 2px 6px rgba(0,0,0,0.08);} 
.box b{font-size:18px;}
input,textarea,select{border:1px solid #bbb;width:100%;padding:10px;border-radius:6px;background:#fff;}
button{cursor:pointer;border-radius:6px;}
.btn{background:#e4e4e4;border:1px solid #aaa;padding:8px 14px;font-weight:bold;}
.btn:hover{background:#dcdcdc;}
.btn.del{background:#ffdddd;border-color:#ffb3b3;}
.btn.del:hover{background:#ffcccc;}
.btn.filter{background:#d8f2ff;border-color:#bfe7ff;}
.btn.filter:hover{background:#cfeaff;}
#lista{margin-top:15px;}
#formArea{background:#fff;padding:15px;border-radius:10px;border:1px solid #ddd;box-shadow:0 2px 6px rgba(0,0,0,0.08);} 
#formTitle{text-align:center;font-size:20px;margin-bottom:10px;}
#newPedido{background:#ffe2b3;border-color:#f5b76b;}
#newPedido:hover{background:#ffd69a;}
.topActions{display:flex;gap:10px;margin:10px 0;}
.header{font-size:20px;font-weight:bold;margin-bottom:10px;}
.box{background:#fff;border:1px solid #ccc;padding:10px;margin:10px 0;}
input,textarea,select{border:1px solid #bbb;}
.btn{background:#ddd;border:1px solid #aaa;padding:6px 10px;}
.btn.del{background:#f8d7da;border-color:#f5c2c7;}
.btn.filter{background:#d1ecf1;border-color:#bee5eb;}
</style><!-- firebase-lite.js --><script>
var firebaseConfig={ apiKey: "AIzaSyChkboBPp21hQ_tRFQrV2Hi3iBF-WHxWSE",
  authDomain: "gerenciador-de-pedidos-4ac32.firebaseapp.com",
  projectId: "gerenciador-de-pedidos-4ac32",
  storageBucket: "gerenciador-de-pedidos-4ac32.firebasestorage.app",
  messagingSenderId: "674975621927",
  appId: "1:674975621927:web:a09ad1f5c57c2dcb00ff02" };
firebase.initializeApp(firebaseConfig);
window.db=firebase.firestore();
</script><!-- app-lite.js --><script>
var APP_PIN="1803";
$(function(){
  $("#pinSubmit").click(function(){
    if($("#pinInput").val()===APP_PIN){
      $("#loginScreen").hide();$("#app").show();carregar();
    }
  });

  $("#newPedido").click(function(){
    $("#formArea").show();$("#formTitle").text("Novo Pedido");window.pedidoAtual=null;
  });

  $("#cancelar").click(function(){ $("#formArea").hide(); });

  $("#salvar").click(function(){
    var dados={nome:$("#nome").val(),numero:$("#numero").val(),itens:$("#itens").val(),valor:parseFloat($("#valor").val())||0,horario:new Date(),status:"active"};
    if(window.pedidoAtual){db.collection("pedidos").doc(window.pedidoAtual).update(dados);}else{db.collection("pedidos").add(dados);}$("#formArea").hide();carregar();
  });
});

function carregar(filtroData){
  $("#lista").html("Carregando...");
  var ref=db.collection("pedidos").where("status","==","active").orderBy("horario","asc");
  if(filtroData){
    var inicio=new Date(filtroData.getFullYear(),filtroData.getMonth(),filtroData.getDate());
    var fim=new Date(inicio);fim.setDate(fim.getDate()+1);
    ref=db.collection("pedidos").where("status","==","active").where("horario",">=",inicio).where("horario","<",fim).orderBy("horario","asc");
  }
  ref.get().then(function(snap){
    var html="";
    snap.forEach(function(doc){var d=doc.data();html+="<div class='box'><b>"+d.nome+"</b><br/>"+new Date(d.horario.toDate()).toLocaleString('pt-BR')+"<br/>R$ "+d.valor.toFixed(2)+"<br/><button class='btn' onclick=\"abrir('"+doc.id+"')\">Editar</button> <button class='btn del' onclick=\"excluir('"+doc.id+"')\">Excluir</button></div>";});
    $("#lista").html(html||"Nenhum pedido.");
  });
}(){
  $("#lista").html("Carregando...");
  db.collection("pedidos").where("status","==","active").orderBy("horario","asc").get().then(function(snap){
    var html="";
    snap.forEach(function(doc){var d=doc.data();html+="<div onclick=\"abrir('"+doc.id+"')\"><b>"+d.nome+"</b><br/>R$ "+d.valor.toFixed(2)+"</div>";});
    $("#lista").html(html||"Nenhum pedido.");
  });
}

function abrir(id){
  window.pedidoAtual=id;
  db.collection("pedidos").doc(id).get().then(function(doc){var d=doc.data();$("#formArea").show();$("#formTitle").text("Editar Pedido");$("#nome").val(d.nome);$("#numero").val(d.numero);$("#itens").val(d.itens);$("#valor").val(d.valor);});
}(id){
  window.pedidoAtual=id;
  db.collection("pedidos").doc(id).get().then(function(doc){var d=doc.data();$("#formArea").show();$("#formTitle").text("Editar Pedido");$("#nome").val(d.nome);$("#numero").val(d.numero);$("#itens").val(d.itens);$("#valor").val(d.valor);});
}
function excluir(id){ if(confirm('Deseja excluir?')){ db.collection('pedidos').doc(id).delete().then(function(){ carregar(); }); }}

$(function(){
  var hoje=new Date();
  $("#newPedido").before('<br><input type="date" id="filtroData"> <button class="btn filter" id="btnFiltrar">Filtrar</button>');
  $("#btnFiltrar").click(function(){var val=$("#filtroData").val(); if(val){ carregar(new Date(val)); } else { carregar(); }});
});
</script>